(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=r(e);fetch(e.href,t)}})();let s;const c=localStorage.getItem("access_token");c&&gapi.auth.setToken({access_token:c});document.getElementById("signup").addEventListener("click",function(){u()});function u(){s.callback=async o=>{if(o.error!==void 0)throw o;document.getElementById("signup").style.visibility="hidden",localStorage.setItem("access_token",gapi.auth.getToken().access_token),await d()},gapi.auth.getToken()===null?s.requestAccessToken({prompt:"consent"}):s.requestAccessToken({prompt:""})}async function d(o){const n=new File([await blobToArrayBuffer(o)],"video.mp4",{type:"video/mp4"}),r={name:"sample-file-via-js",mimeType:"video/mp4",parents:["SET-GOOGLE-DRIVE-FOLDER-ID"]};var i=gapi.auth.getToken().access_token,e=new FormData;e.append("metadata",new Blob([JSON.stringify(r)],{type:"application/json"})),e.append("file",n);var t=new XMLHttpRequest;t.open("POST","https://www.googleapis.com/upload/drive/v3/files?uploadType=resumable&upload_id=xa298sd_sdlkj2"),t.setRequestHeader("Authorization","Bearer "+i),t.responseType="json",t.onload=()=>{document.getElementById("content").innerHTML="File uploaded successfully. The Google Drive file id is <b>"+t.response.id+"</b>",document.getElementById("content").style.display="block"},t.send(e)}let p=document.getElementById("start"),m=document.getElementById("stop"),l;p.addEventListener("click",async function(){let o=await f();l=y(o);let n=document.createElement("p");n.textContent="Started recording",document.body.appendChild(n)});m.addEventListener("click",function(){l.stop();let o=document.createElement("p");o.textContent="Stopped recording",document.body.appendChild(o)});async function f(){return await navigator.mediaDevices.getDisplayMedia({audio:!0,video:{mediaSource:"screen"}})}function y(o,n){let r=[];const i=new MediaRecorder(o);return i.ondataavailable=function(e){e.data.size>0&&r.push(e.data)},i.onstop=function(){g(r),r=[]},i.start(200),i}async function g(o){const n=new Blob(o,{type:"video/mp4"});try{let r=await d(n);console.log(r)}catch(r){console.log(r)}}
